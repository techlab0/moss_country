# ğŸš€ MOSS COUNTRY æœ¬ç•ªç’°å¢ƒè¨­å®šã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€MOSS COUNTRY ECã‚µã‚¤ãƒˆã‚’æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€å®‰å…¨ã«é‹ç”¨ã™ã‚‹ãŸã‚ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

## ğŸ”§ å¿…é ˆç’°å¢ƒå¤‰æ•°è¨­å®š

### 1. åŸºæœ¬è¨­å®š
```bash
# Next.jsè¨­å®š
NODE_ENV=production
NEXTAUTH_URL=https://your-domain.com
NEXTAUTH_SECRET=your-super-secret-nextauth-key-32-chars-minimum

# ã‚µã‚¤ãƒˆè¨­å®š
SITE_URL=https://your-domain.com
```

### 2. èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
```bash
# ç®¡ç†è€…èªè¨¼
ADMIN_EMAIL=moss.country.kokenokuni@gmail.com
ADMIN_PASSWORD=ChangeThis2024!SecurePassword
ADMIN_JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-minimum-32-characters

# å¤šè¦ç´ èªè¨¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
ADMIN_2FA_ENABLED=false
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+815012345678

# Google OAuthï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
GOOGLE_CLIENT_ID=your-google-client-id.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
```

### 3. Sanity CMSè¨­å®š
```bash
NEXT_PUBLIC_SANITY_PROJECT_ID=z36tkqex
NEXT_PUBLIC_SANITY_DATASET=production
SANITY_API_TOKEN=your-sanity-write-token
```

### 4. æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ è¨­å®š (Square)
```bash
# Squareè¨­å®šï¼ˆæœ¬ç•ªç”¨ï¼‰
SQUARE_ENVIRONMENT=production
NEXT_PUBLIC_SQUARE_APPLICATION_ID=your-production-app-id
SQUARE_ACCESS_TOKEN=your-production-access-token
SQUARE_LOCATION_ID=your-production-location-id
NEXT_PUBLIC_SQUARE_LOCATION_ID=your-production-location-id
```

### 5. ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®š (SendGrid)
```bash
SENDGRID_API_KEY=SG.your-sendgrid-api-key
FROM_EMAIL=noreply@your-domain.com
```

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### 1. ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¦ä»¶
- **æœ€å°8æ–‡å­—**
- **å¤§æ–‡å­—ãƒ»å°æ–‡å­—ãƒ»æ•°å­—ãƒ»ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€**
- **å®šæœŸçš„ãªå¤‰æ›´ã‚’æ¨å¥¨**

### 2. JWT Secretç”Ÿæˆ
```bash
# å¼·åŠ›ãªJWTç§˜å¯†éµã‚’ç”Ÿæˆ
openssl rand -hex 32
```

### 3. HTTPSå¿…é ˆè¨­å®š
- SSL/TLSè¨¼æ˜æ›¸ã®è¨­å®š
- HTTPã‹ã‚‰HTTPSã¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¨­å®š

## ğŸ“± å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹è¨­å®š

### 1. Twilio SMSè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
1. [Twilio Console](https://console.twilio.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»é›»è©±ç•ªå·å–å¾—
3. Account SIDã€Auth Tokenã€é›»è©±ç•ªå·ã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®š

### 2. Google OAuthè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
1. [Google Cloud Console](https://console.cloud.google.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. OAuth 2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDä½œæˆ
3. æ‰¿èªæ¸ˆã¿ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã« `https://your-domain.com/api/auth/callback/google` ã‚’è¿½åŠ 
4. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®š

### 3. Squareæ±ºæ¸ˆè¨­å®š
1. [Square Developer Dashboard](https://developer.squareup.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æœ¬ç•ªç’°å¢ƒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
3. Production Access Tokenå–å¾—
4. Webhook URLè¨­å®š: `https://your-domain.com/api/webhooks/square`

### 4. SendGridè¨­å®š
1. [SendGrid Console](https://sendgrid.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. API Keyä½œæˆ
3. é€ä¿¡è€…èªè¨¼ï¼ˆSPF/DKIMï¼‰è¨­å®š
4. é€ä¿¡ãƒ‰ãƒ¡ã‚¤ãƒ³ã®èªè¨¼

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ‰‹é †

### Vercel ã§ã®æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. Vercel CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm i -g vercel

# 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³
vercel login

# 3. åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤
vercel

# 4. æœ¬ç•ªç’°å¢ƒè¨­å®š
vercel env add ADMIN_EMAIL production
vercel env add ADMIN_PASSWORD production
vercel env add ADMIN_JWT_SECRET production
# ... ä»–ã®ç’°å¢ƒå¤‰æ•°ã‚‚è¿½åŠ 

# 5. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
```bash
# ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¿½åŠ 
vercel domains add your-domain.com
vercel domains add www.your-domain.com

# DNSè¨­å®š
# A ãƒ¬ã‚³ãƒ¼ãƒ‰: your-domain.com â†’ 76.76.19.61
# CNAME ãƒ¬ã‚³ãƒ¼ãƒ‰: www.your-domain.com â†’ cname.vercel-dns.com
```

## ğŸ” é‹ç”¨ç›£è¦–è¨­å®š

### 1. ãƒ­ã‚°ç›£è¦–
- Vercel Function Logsã®ç›£è¦–
- ç›£æŸ»ãƒ­ã‚°ã®å®šæœŸç¢ºèª
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆã®å³åº§å¯¾å¿œ

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```bash
# Core Web Vitalsç›£è¦–
# - First Contentful Paint < 1.8ç§’
# - Largest Contentful Paint < 2.5ç§’
# - Cumulative Layout Shift < 0.1
```

### 3. ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ ç›£è¦–
- å¤–éƒ¨ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹è¨­å®šï¼ˆUptimeRobotç­‰ï¼‰
- ç›£è¦–URL: `https://your-domain.com/api/health`

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰å¿…é ˆç¢ºèª
- [ ] å…¨ç’°å¢ƒå¤‰æ•°ãŒæœ¬ç•ªç”¨ã«è¨­å®šæ¸ˆã¿
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´æ¸ˆã¿
- [ ] JWTç§˜å¯†éµãŒå¼·åŠ›ï¼ˆ32æ–‡å­—ä»¥ä¸Šï¼‰
- [ ] HTTPSè¨¼æ˜æ›¸è¨­å®šæ¸ˆã¿
- [ ] Sanity Studioæœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½¿ç”¨
- [ ] Squareæœ¬ç•ªç’°å¢ƒè¨­å®šæ¸ˆã¿
- [ ] SendGridé€ä¿¡è€…èªè¨¼å®Œäº†

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- [ ] 2FAæœ‰åŠ¹åŒ–æ¨å¥¨
- [ ] ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæœ€å°é™
- [ ] å®šæœŸçš„ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´
- [ ] ç›£æŸ»ãƒ­ã‚°å®šæœŸç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé©ç”¨

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ç”»åƒæœ€é©åŒ–
- Next.js Imageæœ€é©åŒ–æœ‰åŠ¹
- WebPå½¢å¼è‡ªå‹•å¤‰æ›
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒé…ä¿¡

### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- CDNæ´»ç”¨ï¼ˆVercel Edge Networkï¼‰
- é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### 3. ãƒãƒ³ãƒ‰ãƒ«æœ€é©åŒ–
```bash
# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºåˆ†æ
npm run build
npx @next/bundle-analyzer
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ³•

#### 1. èªè¨¼ã‚¨ãƒ©ãƒ¼
**ç—‡çŠ¶**: ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„
**è§£æ±ºæ³•**:
- ç’°å¢ƒå¤‰æ•° `ADMIN_EMAIL` ã¨ `ADMIN_PASSWORD` ã‚’ç¢ºèª
- JWT_SECRET ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### 2. æ±ºæ¸ˆã‚¨ãƒ©ãƒ¼
**ç—‡çŠ¶**: Squareæ±ºæ¸ˆãŒå¤±æ•—ã™ã‚‹
**è§£æ±ºæ³•**:
- Squareç’°å¢ƒè¨­å®šç¢ºèªï¼ˆ`SQUARE_ENVIRONMENT=production`ï¼‰
- Location ID ã®æ­£ç¢ºæ€§ç¢ºèª
- Webhook URLè¨­å®šç¢ºèª

#### 3. ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼
**ç—‡çŠ¶**: ãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œãªã„
**è§£æ±ºæ³•**:
- SendGrid API Keyç¢ºèª
- é€ä¿¡è€…èªè¨¼ç¢ºèª
- FROM_EMAIL ãƒ‰ãƒ¡ã‚¤ãƒ³èªè¨¼ç¢ºèª

### ç·Šæ€¥æ™‚å¯¾å¿œ

#### ã‚µã‚¤ãƒˆãƒ€ã‚¦ãƒ³æ™‚
1. Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
2. æœ€æ–°ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
3. ãƒ­ã‚°ç¢ºèªãƒ»åŸå› ç‰¹å®š
4. ä¿®æ­£å¾Œå†ãƒ‡ãƒ—ãƒ­ã‚¤

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¾µå®³æ™‚
1. ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å³åº§å¤‰æ›´
2. JWTç§˜å¯†éµå†ç”Ÿæˆ
3. ç›£æŸ»ãƒ­ã‚°è©³ç´°ç¢ºèª
4. å¿…è¦ã«å¿œã˜ã¦ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™

## ğŸ“ˆ é‹ç”¨ãƒ•ãƒ­ãƒ¼

### æ—¥å¸¸é‹ç”¨
- [ ] ç›£æŸ»ãƒ­ã‚°ç¢ºèªï¼ˆæ—¥æ¬¡ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ç¢ºèª
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—çŠ¶æ³ç¢ºèª

### é€±æ¬¡é‹ç”¨
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æ´»å‹•ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
- [ ] ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

### æœˆæ¬¡é‹ç”¨
- [ ] ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦ç›£æŸ»
- [ ] ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™è¦‹ç›´ã—
- [ ] ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé©ç”¨
- [ ] ç½å®³å¾©æ—§ãƒ†ã‚¹ãƒˆ

## ğŸ†˜ ã‚µãƒãƒ¼ãƒˆãƒ»é€£çµ¡å…ˆ

### æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ
- **é–‹ç™ºè€…**: [é–‹ç™ºè€…é€£çµ¡å…ˆ]
- **ç·Šæ€¥æ™‚**: [ç·Šæ€¥é€£çµ¡å…ˆ]

### å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚µãƒãƒ¼ãƒˆ
- **Vercel**: https://vercel.com/support
- **Sanity**: https://www.sanity.io/help
- **Square**: https://squareup.com/help
- **SendGrid**: https://sendgrid.com/support

---

## âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå®Œäº†ãƒã‚§ãƒƒã‚¯

æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

### æ©Ÿèƒ½ç¢ºèª
- [ ] ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸æ­£å¸¸è¡¨ç¤º
- [ ] å•†å“ãƒšãƒ¼ã‚¸æ­£å¸¸è¡¨ç¤º
- [ ] ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆå‹•ä½œ
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
- [ ] æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ
- [ ] ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½
- [ ] ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª
- [ ] HTTPSæ¥ç¶šç¢ºèª
- [ ] ç®¡ç†ç”»é¢èªè¨¼ç¢ºèª
- [ ] 2FAå‹•ä½œç¢ºèªï¼ˆæœ‰åŠ¹ãªå ´åˆï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª
- [ ] ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦ < 3ç§’
- [ ] Core Web Vitals è‰¯å¥½
- [ ] ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºæœ€é©åŒ–

**ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼MOSS COUNTRY ãŒæœ¬ç•ªç’°å¢ƒã§ç¨¼åƒä¸­ã§ã™ï¼**

---
*æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ26æ—¥*
*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 7.0 - æœ¬ç•ªç’°å¢ƒé‹ç”¨é–‹å§‹ç‰ˆ*